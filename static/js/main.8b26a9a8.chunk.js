(this.webpackJsonpgotapp=this.webpackJsonpgotapp||[]).push([[0],{30:function(e,t,s){},36:function(e,t,s){},37:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},41:function(e,t,s){},43:function(e,t,s){},44:function(e,t,s){"use strict";s.r(t);var r=s(0),n=s(1),c=s.n(n),a=s(21),i=s.n(a),o=s(47),l=s(45),h=s(46),d=s(11);s(30);var j=()=>Object(r.jsxs)("div",{className:"header-block",children:[Object(r.jsx)("h4",{className:"header-label",children:Object(r.jsx)(d.b,{to:"/",children:"Game of Thrones"})}),Object(r.jsxs)("div",{className:"header-link",children:[Object(r.jsx)("li",{children:Object(r.jsx)(d.b,{to:"/characters/",children:"Characters"})}),Object(r.jsx)("li",{children:Object(r.jsx)(d.b,{to:"/houses/",children:"Houses"})}),Object(r.jsx)("li",{children:Object(r.jsx)(d.b,{to:"/books/",children:"Books"})})]})]}),u=s(5),b=s.n(u),m=s(12);class p{constructor(){var e=this;this.getResource=function(){var t=Object(m.a)(b.a.mark((function t(s){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e._apiBase).concat(s));case 2:if((r=t.sent).ok){t.next=5;break}throw new Error("Could not fetch ".concat(s,", received ").concat(r.status));case 5:return t.next=7,r.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getAllCharacters=Object(m.a)(b.a.mark((function t(){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getResource("/characters?page=6&pageSize=6");case 2:return s=t.sent,t.abrupt("return",s.map(e._transformCharacter));case 4:case"end":return t.stop()}}),t)}))),this.getCharacter=function(){var t=Object(m.a)(b.a.mark((function t(s){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getResource("/characters/".concat(s));case 2:return r=t.sent,t.abrupt("return",e._transformCharacter(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getAllBooks=Object(m.a)(b.a.mark((function t(){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getResource("/books?pageSize=6");case 2:return s=t.sent,t.abrupt("return",s.map(e._transformBook));case 4:case"end":return t.stop()}}),t)}))),this.getBook=function(){var t=Object(m.a)(b.a.mark((function t(s){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getResource("/books/".concat(s));case 2:return r=t.sent,t.abrupt("return",e._transformBook(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getAllHouses=Object(m.a)(b.a.mark((function t(){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getResource("/houses?page=2&pageSize=6");case 2:return s=t.sent,t.abrupt("return",s.map(e._transformHouse));case 4:case"end":return t.stop()}}),t)}))),this.getHouse=function(){var t=Object(m.a)(b.a.mark((function t(s){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getResource("/houses/".concat(s));case 2:return r=t.sent,t.abrupt("return",e._transformHouse(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this._transformCharacter=e=>({id:this._extractId(e),name:this.isSet(e.name),gender:this.isSet(e.gender),born:this.isSet(e.born),died:this.isSet(e.died),culture:this.isSet(e.culture)}),this._transformBook=e=>({id:this._extractId(e),name:this.isSet(e.name),numberOfPages:this.isSet(e.numberOfPages),publisher:this.isSet(e.publisher),released:this.isSet(e.released).substring(0,4)}),this._transformHouse=e=>({id:this._extractId(e),name:this.isSet(e.name),region:this.isSet(e.region),words:this.isSet(e.words),coatOfArms:this.isSet(e.coatOfArms)}),this._apiBase="https://www.anapioficeandfire.com/api"}isSet(e){return e||"no data :("}_extractId(e){return e.url.match(/\/([0-9]*)$/)[1]}}s(36);var x=()=>Object(r.jsx)("div",{className:"loadingio-spinner-spinner-1hnija061rv",children:Object(r.jsxs)("div",{className:"ldio-bio29zu4ddv",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})}),O=(s(37),s.p+"static/media/error.52a15638.jpg");var g=()=>Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"error-message",children:"Something went wrong!"}),Object(r.jsx)("img",{src:O,alt:"error"})]});s(38);class f extends n.Component{constructor(...e){super(...e),this.gotService=new p,this.state={char:{},loading:!0,error:!1},this.onCharLoaded=e=>{this.setState({char:e,loading:!1})},this.onError=e=>{this.setState({error:!0,loading:!1})},this.updateChar=()=>{const e=Math.floor(140*Math.random()+25);this.gotService.getCharacter(e).then(this.onCharLoaded).catch(this.onError)}}componentDidMount(){this.updateChar(),this.timerId=setInterval(this.updateChar,1500)}componentWillUnmount(){clearInterval(this.timerId)}render(){const e=this.state,t=e.char,s=e.loading,n=e.error,c=s?Object(r.jsx)(x,{}):null,a=n?Object(r.jsx)(g,{}):null,i=s||n?null:Object(r.jsx)(v,{char:t});return Object(r.jsxs)("div",{className:"random-block rounded",children:[c,a,i]})}}const v=({char:e})=>{const t=e.name,s=e.gender,n=e.born,c=e.died,a=e.culture;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h4",{children:t}),Object(r.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(r.jsx)("span",{className:"term",children:"Gender "}),Object(r.jsx)("span",{children:s})]}),Object(r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(r.jsx)("span",{className:"term",children:"Born "}),Object(r.jsx)("span",{children:n})]}),Object(r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(r.jsx)("span",{className:"term",children:"Died "}),Object(r.jsx)("span",{children:c})]}),Object(r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(r.jsx)("span",{className:"term",children:"Culture "}),Object(r.jsx)("span",{children:a})]})]})]})};s(39);class S extends n.Component{constructor(...e){super(...e),this.state={itemList:null,loading:!0,error:!1},this.onError=()=>{this.setState({error:!0,loading:!1})}}componentDidMount(){(0,this.props.getData)().then((e=>{this.setState({itemList:e})})).catch(this.onError)}renderItems(e){return e.map((e=>{const t=e.id,s=this.props.renderItem(e);return Object(r.jsx)("li",{className:"list-group-item",onClick:()=>this.props.onItemSelected(t),children:s},t)}))}render(){const e=this.state,t=e.itemList,s=e.loading,n=e.error;if(!t&&s)return Object(r.jsx)(x,{});if(n)return Object(r.jsx)(g,{});const c=this.renderItems(t);return Object(r.jsx)("ul",{className:"item-list list-group",children:c})}}s(40);class C extends n.Component{constructor(...e){super(...e),this.state={item:null,loading:!0,error:!1},this.onItemLoading=()=>{this.setState({loading:!0})},this.onError=()=>{this.setState({error:!0,loading:!1})},this.updateItem=()=>{const e=this.props,t=e.itemId,s=e.getData;t&&s(t).then((e=>{this.setState({item:e,loading:!1})})).catch(this.onError)}}componentDidMount(){this.updateItem()}componentDidUpdate(e){this.props.itemId!==e.itemId&&(this.onItemLoading(),this.updateItem())}render(){const e=this.state,t=e.item,s=e.loading,n=e.error,a=this.props.itemLabel;if(!t)return Object(r.jsx)("span",{className:"select-error",children:a});let i=s?Object(r.jsx)(x,{}):null;const o=n?Object(r.jsx)(g,{}):null,l=s||n?null:Object(r.jsx)(k,{item:t,fields:c.a.Children.map(this.props.children,(e=>c.a.cloneElement(e,{item:t})))});return Object(r.jsxs)("div",{className:"item-details rounded",children:[i,o,l]})}}const w=({item:e,field:t,label:s})=>Object(r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(r.jsx)("span",{className:"term",children:s}),Object(r.jsx)("span",{children:e[t]})]}),k=({item:e,fields:t})=>{const s=e.name;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h4",{children:s}),Object(r.jsx)("ul",{className:"list-group list-group-flush",children:t})]})};var I=({left:e,right:t})=>Object(r.jsxs)(l.a,{children:[Object(r.jsx)(h.a,{md:"5",children:e}),Object(r.jsx)(h.a,{md:"7",children:t})]});class N extends n.Component{constructor(...e){super(...e),this.gotService=new p,this.state={selectedChar:null,error:!1},this.onCharSelected=e=>{this.setState({selectedChar:e})}}componentDidCatch(){this.setState({error:!0})}render(){const e=this.state,t=e.selectedChar;if(e.error)return Object(r.jsx)(g,{});const s=Object(r.jsx)(S,{onItemSelected:this.onCharSelected,getData:this.gotService.getAllCharacters,renderItem:({name:e})=>e}),n=Object(r.jsxs)(C,{itemId:t,itemLabel:"Please select a character",getData:()=>this.gotService.getCharacter(t),children:[Object(r.jsx)(w,{field:"gender",label:"Gender"}),Object(r.jsx)(w,{field:"born",label:"Born"}),Object(r.jsx)(w,{field:"died",label:"Died"}),Object(r.jsx)(w,{field:"culture",label:"Culture"})]});return Object(r.jsx)(I,{left:s,right:n})}}class D extends n.Component{constructor(...e){super(...e),this.gotService=new p,this.state={selectedHouse:null,error:!1},this.onHouseSelected=e=>{this.setState({selectedHouse:e})}}componentDidCatch(){this.setState({error:!0})}render(){const e=this.state,t=e.selectedHouse;if(e.error)return Object(r.jsx)(g,{});const s=Object(r.jsx)(S,{onItemSelected:this.onHouseSelected,getData:this.gotService.getAllHouses,renderItem:e=>e.name}),n=Object(r.jsxs)(C,{itemId:t,itemLabel:"Please select a house",getData:()=>this.gotService.getHouse(t),children:[Object(r.jsx)(w,{field:"region",label:"Region"}),Object(r.jsx)(w,{field:"words",label:"Words"}),Object(r.jsx)(w,{field:"coatOfArms",label:"Coat of Arms"})]});return Object(r.jsx)(I,{left:s,right:n})}}var _=s(4);class H extends n.Component{constructor(...e){super(...e),this.gotService=new p,this.state={error:!1}}componentDidCatch(){this.setState({error:!0})}render(){return this.state.error?Object(r.jsx)(g,{}):Object(r.jsxs)(l.a,{children:[Object(r.jsx)(h.a,{md:"2"}),Object(r.jsx)(h.a,{md:"8",children:Object(r.jsx)(S,{onItemSelected:e=>{this.props.history.push(e)},getData:this.gotService.getAllBooks,renderItem:e=>e.name})}),Object(r.jsx)(h.a,{md:"2"})]})}}var y=Object(_.e)(H);class B extends n.Component{constructor(...e){super(...e),this.gotService=new p}render(){return Object(r.jsxs)(l.a,{children:[Object(r.jsx)(h.a,{md:"2"}),Object(r.jsx)(h.a,{md:"8",children:Object(r.jsxs)(C,{itemId:this.props.bookId,itemLabel:"",getData:()=>this.gotService.getBook(this.props.bookId),children:[Object(r.jsx)(w,{field:"numberOfPages",label:"Pages"}),Object(r.jsx)(w,{field:"publisher",label:"Publisher"}),Object(r.jsx)(w,{field:"released",label:"Release Year"})]})}),Object(r.jsx)(h.a,{md:"2",children:Object(r.jsx)("button",{type:"button",className:"btn main-btn",children:Object(r.jsx)(d.b,{to:"/books/",children:"back to books"})})})]})}}s(41);class R extends n.Component{constructor(...e){super(...e),this.state={randomCharVisible:!1,error:!1},this.onRandomCharToogle=()=>{this.setState((({randomCharVisible:e})=>({randomCharVisible:!e})))}}componentDidCatch(){this.setState({error:!0})}render(){const e=this.state,t=e.randomCharVisible;if(e.error)return Object(r.jsx)(g,{});let s="Hide Random Character";t||(s="Show Random Character");const n=t?Object(r.jsx)(f,{}):null;return Object(r.jsx)(d.a,{children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(o.a,{children:Object(r.jsx)(j,{})}),Object(r.jsxs)(o.a,{children:[Object(r.jsx)(l.a,{children:Object(r.jsxs)(h.a,{lg:{size:5,offset:0},className:"random-char-block",children:[Object(r.jsx)("button",{type:"button",className:"btn main-btn",onClick:this.onRandomCharToogle,children:s}),n]})}),Object(r.jsx)(_.a,{path:"/characters",component:N}),Object(r.jsx)(_.a,{path:"/houses",component:D}),Object(r.jsx)(_.a,{path:"/books",exact:!0,component:y}),Object(r.jsx)(_.a,{path:"/books/:id",render:({match:e})=>{const t=e.params.id;return Object(r.jsx)(B,{bookId:t})}})]})]})})}}s(42),s(43);i.a.render(Object(r.jsx)(R,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.8b26a9a8.chunk.js.map